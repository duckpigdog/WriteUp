# Metasploitable: 1&2

项目地址：https://download.vulnhub.com/metasploitable/Metasploitable.zip

是一个打包好的镜像文件

**注意：导入 vmx 时一定要选择我已移动，否则没网**

使用 Nmap 扫描出开放服务及操作系统版本

![](https://pic1.imgdb.cn/item/6971b0c1128977901e187ccb.png)

## 弱口令

### FTP

使用九头蛇爆破拿到弱口令 

```
user:user
```

![](https://pic1.imgdb.cn/item/6971ba2e2d08d4bddaa67a3e.png)

### SSH（user）

连进去发现有 SSH 私钥

![](https://pic1.imgdb.cn/item/6971c86e2d08d4bddaa69dd3.png)

远程拷贝下来再降低 SSH 版本是可以连接上的

![](https://pic1.imgdb.cn/item/6971c89e2d08d4bddaa69dd7.png)

### SSH（msfadmin）

利用 FTP 弱口令读取文件

![](https://pic1.imgdb.cn/item/6971ca0b2d08d4bddaa69e1d.png)

发现有三个普通用户

![](https://pic1.imgdb.cn/item/6971ca862d08d4bddaa69e34.png)

最后爆破出为

```
msfadmin:msfadmin
```

靶机可以直接登录上

![](https://pic1.imgdb.cn/item/6971cafd2d08d4bddaa69e4b.png)

### Telnet

同理 telnet 服务应该也可以直接登录上

![](https://pic1.imgdb.cn/item/6971cb552d08d4bddaa69e60.png)

### SMB

```bash
# -L 192.168.202.147: 列出目标IP的共享资源列表
# -N: 匿名登录（不使用用户名密码）
smbclient -L 192.168.202.147 -N
```

![](https://pic1.imgdb.cn/item/6971cf192d08d4bddaa69f12.png)

## RCE

### PostgreSQL（CVE-2007-3280）

在 MSF 搜索 PostgreSQL 的漏洞利用脚本

![](https://pic1.imgdb.cn/item/6971d9152d08d4bddaa6a159.png)

## 提权

### 内核 CVE-2009-1185

上一个靶机的内核漏洞这里一样可以打

```bash
cat /proc/net/netlink
chmod +x 8478.sh
```

![](https://pic1.imgdb.cn/item/6971cc462d08d4bddaa69e88.png)

### Samba CVE-2007-2447

继上面匿名登录成功后可以搜索有关 Samba 服务的提权漏洞

![](https://pic1.imgdb.cn/item/6971cfa62d08d4bddaa69f3c.png)

使用第一个提权成功

![](https://pic1.imgdb.cn/item/6971d05c2d08d4bddaa69f5e.png)

### VSFTPD 2.3.4（CVE-2011-2523）

![](https://pic1.imgdb.cn/item/697778f5a583b567209bc69c.png)

### UnrealIRCd 3.2.8.1（CVE-2010-2075）

![](https://pic1.imgdb.cn/item/69777c35a583b567209bc799.png)

### bindshell

这是一个已经直接运行在 1524 端口上的 Root Shell

![](https://pic1.imgdb.cn/item/697808d0a583b567209bd5a0.png)

## 补充说明

本靶机 TWiki、Apache Tomcat 可以直接打 Nday，所以不会记录